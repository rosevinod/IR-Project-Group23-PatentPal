from flask import Flask, render_template, url_for, redirect, request
# import summary

app = Flask(__name__)


def get_results(search_query):
	if search_query != "":
		abstract_list = ["We've made some changes to Infinity Search recently and we no longer have a free tier."]
		description_list = ["referring specifically to fig1 of the accompanying drawing , a needle support 10 includes a generally cylindrical holder member 11 securely supporting a needle 12 which projects co - axially from the forward end of member 11 . holder member 11 may be molded about the contained rearward end of needle 12 or may be otherwise secured thereto in any conventional manner so as to preclude mutual axial displacement of needle 12 and holder 11 during insertion of the needle into a blood vessel in the manner described herein . holder member 11 is hollow inside , as is needle 12 , so that infusion fluid supplied to the interior of member 11 can be delivered through needle 12 to a blood vessel . in order to receive such infusion fluid , the rearward end of member 11 is provided with a socket 13 to which one end of a supply tube 14 attaches . a connector 15 , secured to the other end of tube 14 , delivers the infusion fluid to the tube and holder . a retainer member 16 , preferably formed integrally with holder member 11 , is in the form of a flat paddle - like stem having a proximal end 18 and a distal end 19 . the transverse cross - section of retainer 16 is generally rectangular . the proximal end 18 of retainer member 16 is secured to holder member 11 proximate socket 13 at the rearward end of member 11 . proximal end 18 of retainer 16 extends a short distance away from holder member 11 at which point the retainer 16 bends at 17 so as to extend in a forward direction along side and in spaced relation with holder 11 . the space between retainer 16 and holder 11 may be approximately characterized as a u - shaped channel with bend 17 constituting the base of the u . retainer 16 may extend parallel to holder 11 ; however , in the preferred illustrated embodiment , retainer 16 is angled slightly with respect to the longitudinal axis of holder 11 . this angle , on the order of 5 Â°, causes retainer 16 to converge slightly so that distal end 19 is somewhat closer to the holder 11 than is bend 17 . the transverse spacing between the retainer 16 and holder 11 is important as described hereinbelow . in the preferred embodiment , retainer 16 is somewhat flexible so that a body disposed between the retainer and holder 11 is resiliently urged against the holder by the retainer . holder 11 and retainer 16 are preferably molded together as one piece of thermoplastic and is sufficiently rigid to preclude significant transverse bending . referring to fig2 a positional stabilization member 20 has a top surface 21 and bottom surface 22 ( shown in fig3 but not in fig2 ). a holder support region 23 is defined in top surface 21 as a longitudinally - extending channel having a v - shaped cross - section . this groove serves as a &# 34 ; living hinge &# 34 ; which permits stabilization member 20 to be flexed upwardly about region 23 . a pair of wing - like members 24 , 25 normally extend transversely from opposite sides of the region 23 and can be brought into partial contact with one another when flexed upwardly about region 23 . wing - like members 24 , 25 include respective co - planar projections 27 , 28 which extend outwardly and rearwardly relative to support region 23 . a plurality of small nipple - like protuberances of generally truncated spherical shape are defined in rows extending along side support region 23 on the top surface 21 . bottom surface 22 of stabilization member 20 has a slot 29 , in the form of an open channel of generally rectangular transverse cross - section , extending longitudinally beneath support region 23 . the transverse cross - section of slot 29 is configured to match that of retainer 16 so that the latter can slide longitudinally in the slot and be precluded from transverse movement within the slot . portions of bottom surface 22 are provided with a suitable adhesive coating , as is conventional for such applications , so that the bottom surface can adhere to a patient &# 39 ; s skin for initial positional stabilization after insertion of needle 12 into a blood vessel . the adhesive coating is not applied in slot 29 and is also not applied to the region of projections 27 , 28 . suitable release paper ( not shown ) is applied over the adhesive coating , as is conventional , to protect the coating prior to utilization of the unit . referring to fig3 and 4 , when the unit is ready for insertion of the needle into a patient &# 39 ; s blood vessel , the quick release paper ( not shown ) is removed from the adhesive - coated areas on bottom surface 22 . stabilization member 20 is inserted in the u - shaped channel between retainer 16 and holder member 11 . specifically , stabilization member 20 is positioned so that channel 29 receives retainer 16 and holder member 11 is positioned along support region 23 . in this position , the forward end of holder member 11 , along with needle 12 , extends forwardly of the forward end of stabilization member 20 . wings 24 , 25 are flexed upwardly toward one another around holder member 11 by appropriately grasping the projections 27 , 28 which are not coated with adhesive . the wing - like members tightly engage holder 11 therebetween so as to preclude relative motion of any kind between the holder 11 and the stabilization member 20 . this tight grasping of holder member 11 is enhanced by nipple - like protuberances 26 which , as best seen in fig4 bear firmly against holder 11 . with holder 11 thusly grasped , the needle 12 is inserted into the patient &# 39 ; s blood vessel . after insertion , the wing - like members 24 , 25 are released to their normal flat positions so that the adhesive coated regions on bottom surface 22 contact the patient &# 39 ; s skin and thereby provide initial positional stabilization of the unit . in this position , as best illustrated in fig5 and 6 , the wing - like members 24 , 25 extend substantially transversely of the longitudinal axis of holder 11 and retainer 16 is retained between channel 29 and the patient &# 39 ; s skin . with retainer 16 so constrained , attached holder 11 is constrained against any movement transverse to its longitudinal axis . in other words , holder 11 is constrained against roll , pitch , and yaw . the only possible movement of holder 11 at this time is rearward longitudinally of its axis . in order to preclude such longitudinal movement , surgical tape is placed over the stabilized unit to secure the unit to the patient &# 39 ; s skin in the standard manner . in order to withdraw the needle from the patient &# 39 ; s blood vessel , the surgical tape is first removed . holder 11 is then grasped and pulled rearwardly in an axial direction . since channel 29 constrains retainer 16 against any lateral movement , needle 12 may be withdrawn without any chance of puncturing the blood vessel from such lateral movement . after the needle has been removed from the blood vessel , rearward movement of the holder 11 is continued until retainer 16 clears channel 29 so that support member 10 is entirely disassociated from stabilization member 20 . stabilization member 20 may then be pulled from the patient &# 39 ; s skin without any effect upon the already removed needle . numerous modifications to the described embodiment may be employed without departing from the true spirit and and scope of the invention . for example , although protuberances 26 are desirable to increase the positive engagement between the stabilization member 20 and holder 11 during insertion as illustrated in fig3 and 4 , such protuberances may be eliminated . further , if desired , stabilization member 20 may be provided with two ( 2 ) additional wing - like members of the type described in the aforementioned u . s . patent application ser . no . 99 , 926 so that initial stabilization may be enhanced upon insertion of the needle . it should be noted that the generally rectangular cross - section for retainer 16 and slot 29 is not a limiting factor and can be replaced by triangular , trapezoidal , or other suitable configurations which serve to restrain transverse movement of the retainer relative to stabilization member 20 while permitting slidable longitudinal engagement between the channel and the retainer . moreover , the slot for receiving retainer 16 need not be in the form of an open channel defined in bottom surface 22 of stabilization member 20 . instead , the slot may be defined through the rearward end of stabilization member 20 and surrounded on all sides . for such a slot , the retainer 16 would be received and entirely surrounded by the stabilization member 20 . the spacing between retainer 16 and holder 11 is selected relative to the thickness of stabilization member 20 so that the stabilization member can be firmly held in place in the u - shaped channel between retainer 16 and holder 11 . the flexibility of retainer 16 aids in holding the stabilization member 20 in place . in any event , the engagement of stabilization member 20 between retainer 16 and holder 11 must not be so firm as to preclude smooth sliding of retainer 16 out of slot 29 at the time of withdrawal of needle 12 from the patient &# 39 ; s blood vessel . the slight convergence of retainer 16 toward holder 11 in the forward direction tends to raise the rearward end of holder 11 , thereby tilting the forward end of holder 11 downward to present needle 12 at the proper angle for insertion into the patient &# 39 ; s blood vessel . it is desirable that the length of retainer 16 disposed in slot 29 be significantly greater than the length of needle 12 which is inserted into a patient &# 39 ; s blood vessel . this feature retains the constraint by slot 29 against lateral movement by retainer 16 during withdrawal until the entire needle 12 has been removed . as is noted from the foregoing description , the key features of the present invention are the firm gripping of holder member 11 by stabilization member 20 during insertion so that no relative movement between the two members is possible and the constraint of retainer 16 by slot 29 to preclude all but axial movement of holder 11 during stabilization and withdrawal . while specific embodiments of the invention have been described and illustrated , it will be clear that variations of the details of the construction which are specifically illustrated and described , may be resorted to without departing from the true spirit and scope of the invention as defined in the appended claims ."]
		return {"abstract_list":abstract_list, "description_list" : description_list}
		
	return None

@app.route("/", methods = ['GET', 'POST'])
@app.route("/home", methods = ['GET', 'POST'])
def home():
	if request.method == "POST":
		search_query = request.form.get("search_box")
		results =  get_results(search_query)
		if results is not None:
			return render_template("retrieval_page.html", show_hidden = True, search_query = search_query, len = 8, abstract_list = results['abstract_list'], description_list = results['description_list'])
	return render_template("home_page.html")

@app.route("/retrieval", methods = ['GET', 'POST'])
def retrieval():
	search_query = request.form.get("search_box")
	if request.method == "POST":
		results =  get_results(search_query)
		if results is not None:
			return render_template("retrieval_page.html", show_hidden = True, search_query = search_query, len = 8, abstract_list = results['abstract_list'], description_list = results['description_list'])

	return render_template("retrieval_page.html", show_hidden = False)

@app.route("/summarise", methods = ['GET', 'POST'])
def summarise():
	if request.form.get("Clear_Button"):
		return render_template("summary_page.html", show_hidden = False)

	if request.method == "POST":
		input_text = request.form.get("input_patent")
		if input_text != "":
			output_text = "abcd  hello"
			# output_text = summary.get_summary(input_text)
			return render_template("summary_page.html", show_hidden = True, input_text = input_text, output_text = output_text)

	return render_template("summary_page.html", show_hidden = False)


if __name__ == "__main__":
	app.run(debug = True)
